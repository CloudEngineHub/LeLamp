# Lamp Control

**‚è±Ô∏è Estimated time:** 30 minutes  
**üîß Required tools:** Computer with LeLamp runtime  
**üì¶ Required:** Fully assembled LeLamp with working head and body

For complete lamp control documentation, refer to the [**LeLamp Runtime's GitHub**](https://github.com/humancomputerlab/lelamp_runtime).

If you have run tests for LeLamp Head earlier, you should be familiar with the runtime.

## Calibration

Before recording and replaying movements on the lamp, you need to calibrate:

```bash
uv run -m lelamp.calibrate --id lelamp --port /dev/tty.usbmodem5A680114681
```

The calibration script will run calibration twice, once for the lamp as a follower and once for the lamp as the leader.

**Note: Do not rotate the lamp base and lamp head fully while calibrating. This means the 2 yaw servos. In zero position, rotate them 90 degrees clockwise and counter clockwise.**

## Record and replay movements

To record movement, run the following command in runtime:

```bash
uv run -m lelamp.record --id lelamp --port /dev/tty.usbmodem5A680114681 --name rotation
```

To replay movement, run the following command in runtime:

```bash
uv run -m lelamp.replay --id lelamp --port /dev/tty.usbmodem5A680114681 --name rotation
```

To list all recorded movements, run the following command in runtime:

```bash
uv run -m lelamp.list_recordings --id lelamp
```

## Final System Testing

After completing your LeLamp build, perform these final tests:

### Full System Integration Test

```bash
# Test all servo movements
uv run -m lelamp.test.test_motors --id lelamp --port /dev/ttyUSB0

# Test head components
sudo uv run -m lelamp.test.test_rgb     # LED ring
uv run -m lelamp.test.test_audio        # Audio I/O
libcamera-hello --timeout 2000         # Camera
```

### Record Your First Movement

1. **Position LeLamp** in a safe working area with full range of motion
2. **Record a simple movement** to test the system
3. **Replay the movement** to verify accuracy
4. **Save successful recordings** for future use

## Congratulations! üéâ

You have successfully built your LeLamp! Your robot lamp should now be capable of:

- ‚úÖ Expressive movement through 5 degrees of freedom
- ‚úÖ Visual interaction via camera
- ‚úÖ Audio input/output for voice interaction
- ‚úÖ Programmable LED expressions
- ‚úÖ Recording and replaying custom movements

## Next Steps

- **Explore the runtime**: Check out advanced features in the [LeLamp Runtime repository](https://github.com/humancomputerlab/lelamp_runtime)
- **Join the community**: Share your build on [Discord](https://discord.gg/4hmNW3Ep)
- **Contribute back**: Help improve documentation or share build photos
- **Report issues**: Use [GitHub Issues](https://github.com/humancomputerlab/le_lamp/issues) for bugs or suggestions

---

**Previous**: [Lamp Body](./4.%20Lamp%20Body.md) | **Troubleshooting**: [Common Issues](./6.%20Troubleshooting.md)
